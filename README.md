# ***VK Bot - бот Вконтакте для поиска пары.***

*Бот ищет людей по заданным пользователем параметрам.*

***Доступные параметры*** :  
* Пол;
* Возраст;
* Семейное положение;
* Город.

*После ввода параметров бот выдает найденных пользователей по одному в формате: ``` Имя Фамилия, три лучших фотографии
 и ссылка на страницу```.    Можно поставить `"лайк"`(добавить в избранное), `"дизлайк"`(добавить в чс), продолжить просмотр,
 завершить просмотр или изменить параметры поиск.  
Если оба пользователя поставили `"лайк"`
друг другу, они получат об этом сообщение от бота с предложением написать.  
Пользователь, который был добавлен в "черный список" больше не будет попадаться при 
следующий поисках, только если не будет удален из "черного списка".*

***Функционал бота*** :
* Начать поиск;
* Продолжить поиск по последним заданным параметрам;
* Изменить параметры поиска;
* Добавить в избранное;
* Добавить в чс;
* Просмотреть избранное;
* Просмотреть чс;
* Удалить из избранного;
* Удалить из чс;

## ***Бот развернут на сервере и доступен по ссылке:***
### ***[===>>>click here<<<===](https://vk.com/club210971308).***

***Далее жмите `написать сообщение`.***


## ***Инструкция по настройке и запуску бота:***
### ***Для настройки и работы бота необходим [***python3.x***](https://www.python.org/) (при разработке использовалась версия 3.9.7), [***git***](https://git-scm.com/) и [***postgresql***](https://www.postgresql.org/).***
* ***открыть терминал, скачать репозиторий*** 
```git
git clone https://github.com/FuchkoDmitry/vk_bot.git
```
* ***создать виртуальное окружение в корне проекта, активировать его***  
`$ cd vk_bot`  
`$ python3 -m venv env`   
`$ source env/bin/activate`
* ***установить необходимые для работы бота зависимости в виртуальное окружение***  
`$ pip install -r requirements.txt`
* ***создать файл*** `.env` ***в него внести следующие переменные***
    * `DB_NAME` - имя базы данных(может быть любым);
    * `DB_USER` - имя пользователя БД(обычно postgres, если не создавали отдельно);
    * `DB_PASSWORD` - пароль для входа в БД(создается при создании пользователя БД);
    * `GROUP_TOKEN` - токен группы. Получить токен группы:
        * Создать группу(сообщество) во Вконтакте;
        * В созданной группе: Управление -> Работа с API -> создать ключ;
        * Включить возможность писать в группу: Управление -> Сообщения -> Сообщения сообщества -> Включить
        * Управление -> Сообщения -> Настройки для бота -> включены
        * Созданный ключ копируем в переменную `GROUP_TOKEN`
    * `USER_TOKEN` - токен пользователя. Получить токен пользователя:
        * [переходим по ссылке](https://vk.com/apps?act=manage)
        * нажимаем `создать`, выбираем `standalone-приложение`, вводим название, нажимаем `Подключить приложение`
        * заходим в `настройки` и запоминаем  `ID приложения`
        * вставляем ID приложения в ссылку ниже https://oauth.vk.com/authorize?client_id=ID_приложения&display=page&scope=stats.offline&response_type=token&v=5.131
        * нажимаем `Разрешить`
        * из открывшегося url-адреса копируем токен и вставляем в переменную `USER_TOKEN`
* ***Создаем базу данных запустив скрипт `create_database.py`***  
`$ cd database`  
`$ python3 create_database.py`
* ***Наполняем таблицу Cities городами запустив скрипт `filling_cities_table.py`:***  
`$ cd database`  
`$ python3 filling_cities_table.py`
* ***Запускаем бота с помощью `main.py` в корне проекта:***  
`$ python3 main.py`


